(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{3069:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return ie}});var r=n(5893),a=n(7294),s=n(809),o=n.n(s),c=n(266),i=n(7182),u=n(2809),d=n(9501),l=n(4044),p=n(1372),f=n(4184),m=n.n(f);function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){(0,u.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var x,b,j=function(e){var t=e.className,n=e.inputProps,a=void 0===n?{}:n,s=e.label,o=e.showError,c=void 0!==o&&o,i=e.errorString,u=void 0===i?"":i;return(0,r.jsxs)("div",{className:"pb-8",children:[(0,r.jsxs)("div",{className:t,children:[(0,r.jsx)("label",{className:"flex-0 block text-gray-700 text-sm font-bold mb-2",children:s}),(0,r.jsx)("input",v({className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",type:"text"},a))]}),(0,r.jsx)("div",{className:m()("text-red-500 text-body-sm h-4 my-1",c&&u?"opacity-100":"opacity-0"),children:u})]})},k=n(773),g=n(5503),w=n(4642),y=n(1369),P=(0,g.ZF)({apiKey:"AIzaSyBd-Iaq7fSXCrLMLZLHD8gU0gjLQJYlszs",authDomain:"fontech-asana.firebaseapp.com",databaseURL:"https://fontech-asana-default-rtdb.firebaseio.com",projectId:"fontech-asana"}),S=function(){var e=(0,c.Z)(o().mark((function e(){var t,n,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,w.iH)((0,w.N8)()),e.next=3,(0,w.U2)((0,w.iU)(t,"/"));case 3:if((n=e.sent).exists()){e.next=6;break}throw new Error("snapshot not exists");case 6:return r=n.val(),e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),T=function(){var e=(0,c.Z)(o().mark((function e(t){var n,r,a,s,c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.email,r=t.password,a=(0,y.v0)(),e.next=4,(0,y.e5)(a,n,r);case 4:return s=e.sent,c=s.user,e.abrupt("return",c);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=function(){var e=(0,c.Z)(o().mark((function e(t){var n,r,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.email,r=t.password,P){e.next=3;break}throw new Error("firebase not found");case 3:return e.next=5,T({email:n,password:r});case 5:if(e.sent){e.next=8;break}throw new Error("user not found");case 8:return e.next=10,S();case 10:return a=e.sent,e.abrupt("return",a);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();!function(e){e.email="email",e.password="password"}(x||(x={})),function(e){e.taskName="task-name",e.department="department",e.copyToSelectedProject="copy-to-selected-project",e.assignee="assignee"}(b||(b={}));var Z,N,E,I=n(7990),A=[{id:x.email,label:"Email*",type:"text",placeholder:"name@example.com"},{id:x.password,label:"\u5bc6\u78bc*",type:"password",placeholder:"\u8acb\u8f38\u5165\u60a8\u7684\u5bc6\u78bc"}],C=(Z={},(0,u.Z)(Z,x.email,""),(0,u.Z)(Z,x.password,""),Z),D=d.Ry().shape({email:d.Z_().email("\u7121\u6548\u7684\u96fb\u5b50\u90f5\u4ef6").required("\u672c\u6b04\u4f4d\u70ba\u5fc5\u586b"),password:d.Z_().required("\u672c\u6b04\u4f4d\u70ba\u5fc5\u586b")}),_=function(){var e=(0,p.I0)(),t=a.useState(!1),n=(0,i.Z)(t,2),s=n[0],u=n[1],d=a.useState(""),f=(0,i.Z)(d,2),m=f[0],h=f[1],v=(0,l.TA)({initialValues:C,validationSchema:D,onSubmit:function(){var t=(0,c.Z)(o().mark((function t(n){var r,a,c;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!s){t.next=2;break}return t.abrupt("return");case 2:return u(!0),t.prev=3,t.next=6,O({email:n[x.email],password:n[x.password]});case 6:if(r=t.sent){t.next=9;break}throw new Error("realTimeData not found");case 9:if(a=r["asana-access-token"],c=r.gids,a){t.next=13;break}throw new Error("asanaAccessToken is not vaild");case 13:e((o={data:{asanaAccessToken:a,gids:c}},{type:k.I.SAVE_LOCALDATA,data:o})),t.next=24;break;case 16:return t.prev=16,t.t0=t.catch(3),h("Login failed"),t.next=21,(0,I._v)(2e3);case 21:return h(""),u(!1),t.abrupt("return");case 24:u(!1);case 25:case"end":return t.stop()}var o}),t,null,[[3,16]])})));return function(e){return t.apply(this,arguments)}}()});return(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{children:"Update: 2020/09/06 15:30"}),(0,r.jsx)("p",{children:"\u8acb\u5148\u767b\u5165"}),(0,r.jsxs)("form",{className:"bg-white shadow-md rounded px-8 pt-6 pb-8 mb-4",onSubmit:v.handleSubmit,children:[(0,r.jsx)("div",{children:(0,r.jsx)("div",{className:"flex-1 md:pr-3",children:A.map((function(e){return(0,r.jsx)(j,{inputProps:{id:e.id,name:e.id,placeholder:e.placeholder,type:e.type,onChange:v.handleChange,value:v.values[e.id]},label:e.label,showError:!(!v.touched[e.id]||!v.errors[e.id]),errorString:v.errors[e.id]},"contact-us-form-input-".concat(e.id))}))})}),(0,r.jsx)("button",{className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline",type:"submit",children:"\u78ba\u8a8d\u9001\u51fa"}),m&&(0,r.jsx)("p",{children:m})]})]})},M=n(4880),B=n(7201),F=function(){var e=(0,c.Z)(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}throw new Error("asanaAccessToken not found");case 2:if(n=B.Client.create().useAccessToken(t)){e.next=5;break}throw new Error("client not found");case 5:return e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),G=function(){var e=(0,c.Z)(o().mark((function e(t){var n,r,a,s,c,i,u,d,l,p,f;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.asanaAccessToken,r=t.totalProjectProgressId,a=t.developerTeamId,s=t.developerTeamProgressId,c=t.selectedTask,i=t.selectedProjectGid,u=t.values,c){e.next=3;break}throw new Error("selectedTaskGid not found");case 3:return e.next=5,F(n);case 5:return d=e.sent,l=u[b.department],e.next=9,d.tasks.subtasks(c.gid);case 9:if(p=e.sent){e.next=12;break}throw new Error("selectedTaskSubTasks not found");case 12:return e.next=14,d.sections.findByProject(r);case 14:if(f=e.sent){e.next=17;break}throw new Error("totalProjectProgressSections not found");case 17:if(!["PM","Design"].includes(l)){e.next=21;break}return e.next=20,L({client:d,selectedTask:c,selectedProjectGid:i,values:u,selectedTaskSubTasks:p,totalProjectProgressSections:f});case 20:return e.abrupt("return");case 21:return e.next=23,U({client:d,selectedTask:c,developerTeamId:a,developerTeamProgressId:s,selectedProjectGid:i,values:u,selectedTaskSubTasks:p,totalProjectProgressSections:f});case 23:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),L=function(){var e=(0,c.Z)(o().mark((function e(t){var n,r,a,s,c,i,u,d,l,p,f,m,h,v;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.client,r=t.selectedTask,a=t.selectedProjectGid,s=t.values,c=t.selectedTaskSubTasks,i=t.totalProjectProgressSections,u=s[b.taskName],d=s[b.department],l=s[b.copyToSelectedProject],p=s[b.assignee],f="".concat(r.name,"| ").concat(d),m=c.data.find((function(e){return e.name===f}))){e.next=8;break}return e.next=7,n.tasks.addSubtask(r.gid,{name:f});case 7:m=e.sent;case 8:return e.next=10,n.tasks.addSubtask(m.gid,{name:u,assignee:p});case 10:if(h=e.sent){e.next=13;break}throw new Error("newTask not found");case 13:if(v=i.find((function(e){return e.name===d}))){e.next=16;break}throw new Error("totalProjectProgressSection not found");case 16:return e.next=18,n.sections.addTaskForSection(v.gid,{task:h.gid});case 18:if(!l||!a){e.next=21;break}return e.next=21,n.tasks.addProject(h.gid,{project:a});case 21:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),U=function(){var e=(0,c.Z)(o().mark((function e(t){var n,r,a,s,c,u,d,l,p,f,m,h,v,x,j,k,g,w,y,P,S,T,O,Z,N;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.client,r=t.selectedTask,a=t.developerTeamId,s=t.developerTeamProgressId,c=t.selectedProjectGid,u=t.values,d=t.selectedTaskSubTasks,l=t.totalProjectProgressSections,p=u[b.taskName],f=u[b.department],m=u[b.copyToSelectedProject],h=u[b.assignee],v=f.split("| "),x=(0,i.Z)(v,2),j=x[0],k=x[1],g="".concat(r.name,"| ").concat(j),w="".concat(r.name,"| ").concat(k),e.next=7,n.sections.findByProject(a);case 7:if(y=e.sent,P=y.find((function(e){return e.name===k}))){e.next=11;break}throw new Error("selectedDeveloperTeamSection not found");case 11:if(S=d.data.find((function(e){return e.name===g}))){e.next=16;break}return e.next=15,n.tasks.addSubtask(r.gid,{name:g});case 15:S=e.sent;case 16:if(S){e.next=18;break}throw new Error("departmentTask not found");case 18:return e.next=20,n.tasks.subtasks(S.gid);case 20:if(T=e.sent,O=T.data.find((function(e){return e.name===w}))){e.next=28;break}return e.next=25,n.tasks.addSubtask(S.gid,{name:w});case 25:return O=e.sent,e.next=28,n.sections.addTaskForSection(P.gid,{task:O.gid});case 28:if(O){e.next=30;break}throw new Error("departmentSectionTask not found");case 30:return e.next=32,n.tasks.addSubtask(O.gid,{name:p,assignee:h});case 32:if(Z=e.sent){e.next=35;break}throw new Error("newTask not found");case 35:return e.next=37,n.tasks.addProject(Z.gid,{project:s});case 37:if(N=l.find((function(e){return e.name===k}))){e.next=40;break}throw new Error("totalProjectProgressSection not found");case 40:return e.next=42,n.sections.addTaskForSection(N.gid,{task:Z.gid});case 42:if(!m||!c){e.next=45;break}return e.next=45,n.tasks.addProject(Z.gid,{project:c});case 45:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function V(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?q(Object(n),!0).forEach((function(t){(0,u.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var X=["PM","Design","Developer| App","Developer| Frontend","Developer| Backend","Developer| Other"],R=(N={},(0,u.Z)(N,b.taskName,""),(0,u.Z)(N,b.department,""),(0,u.Z)(N,b.copyToSelectedProject,!1),(0,u.Z)(N,b.assignee,""),N),z=d.Ry().shape((E={},(0,u.Z)(E,b.taskName,d.Z_().required("\u672c\u6b04\u4f4d\u70ba\u5fc5\u586b")),(0,u.Z)(E,b.department,d.Z_().required("\u8acb\u9078\u64c7\u4e00\u500b\u9805\u76ee")),(0,u.Z)(E,b.copyToSelectedProject,d.Xg()),(0,u.Z)(E,b.assignee,d.Z_()),E)),H=function(e){var t=e.asanaAccessToken,n=e.allProjectsId,s=e.developerTeamId,u=e.developerTeamProgressId,d=e.fontechTeamId,p=e.totalProjectProgressId,f=a.useState(!1),h=(0,i.Z)(f,2),v=h[0],x=h[1],k=a.useState(!1),g=(0,i.Z)(k,2),w=g[0],y=g[1],P=a.useState(!1),S=(0,i.Z)(P,2),T=S[0],O=S[1],Z=a.useState(""),N=(0,i.Z)(Z,2),E=N[0],A=N[1],C=a.useState(Array()),D=(0,i.Z)(C,2),_=D[0],B=D[1],L=a.useState(void 0),U=(0,i.Z)(L,2),q=U[0],H=U[1],J=a.useState(void 0),K=(0,i.Z)(J,2),Q=K[0],Y=K[1],$=a.useState(Array()),W=(0,i.Z)($,2),ee=W[0],te=W[1],ne=(0,l.TA)({initialValues:R,validationSchema:z,onSubmit:function(e){var n=function(){var n=(0,c.Z)(o().mark((function n(){return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,G({asanaAccessToken:t,totalProjectProgressId:p,developerTeamId:s,developerTeamProgressId:u,selectedTask:q,selectedProjectGid:null===Q||void 0===Q?void 0:Q.gid,values:e});case 3:A("success"),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),A("fail");case 9:return n.next=11,(0,I._v)(2e3);case 11:O(!1);case 12:case"end":return n.stop()}}),n,null,[[0,6]])})));return function(){return n.apply(this,arguments)}}();T||(O(!0),n())}}),re=function(){var e=(0,c.Z)(o().mark((function e(){var r,a,s,c,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,F(t);case 3:return r=e.sent,e.next=6,r.sections.findByProject(n);case 6:return a=e.sent,s=a.filter((function(e){return"Other"!==e.name})),e.next=10,Promise.all(s.map((function(e){return r.tasks.findBySection(e.gid)})));case 10:c=e.sent,i=s.map((function(e,t){return V(V({},e),{},{list:c[t].data})})),B(i),e.next=17;break;case 15:e.prev=15,e.t0=e.catch(0);case 17:return e.next=19,(0,I._v)(5e3);case 19:x(!1);case 20:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(){return e.apply(this,arguments)}}();a.useEffect((function(){v||q||(x(!0),re())}),[]);var ae=function(){var e=(0,c.Z)(o().mark((function e(){var n,r,a,s,c,i,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,q){e.next=3;break}throw new Error("selectedTask not found");case 3:return e.next=5,F(t);case 5:return n=e.sent,e.next=8,n.tasks.findById(q.gid);case 8:if(r=e.sent,a=r.notes,s=a.match("https://app.asana.com/0/(.*)/"),!(c=null===s||void 0===s?void 0:s[1])){e.next=17;break}return e.next=15,n.projects.findById(c);case 15:i=e.sent,Y(i);case 17:return e.next=19,n.teams.users(d);case 19:(u=e.sent)&&te(u.data),e.next=31;break;case 23:return e.prev=23,e.t0=e.catch(0),e.next=27,(0,I._v)(5e3);case 27:return Y(void 0),te([]),y(!1),e.abrupt("return");case 31:return e.next=33,(0,I._v)(5e3);case 33:y(!1);case 34:case"end":return e.stop()}}),e,null,[[0,23]])})));return function(){return e.apply(this,arguments)}}();a.useEffect((function(){q&&(w||ae())}),[q]);var se=function(){var e=(0,c.Z)(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:Y(void 0),te([]),H({gid:t.value,name:t.label});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),oe=a.useMemo((function(){if(!q)return(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{children:"Choose a Task (Project)"}),(0,r.jsx)("div",{className:"flex flex-wrap -mx-2",children:_.map((function(e){return(0,r.jsxs)("div",{className:"w-64 px-2",children:[(0,r.jsx)("div",{children:e.name}),(0,r.jsx)(M.ZP,{label:e.name,options:e.list.map((function(e){return{value:e.gid,label:e.name}})),onChange:se})]},"all-project-sections-".concat(e.gid))}))})]})}),[_,q]),ce=a.useMemo((function(){if(q)return(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{children:["Find Project"," ",Q?"V":"X"]}),(0,r.jsxs)("form",{className:"bg-white shadow-md rounded px-8 pt-6 pb-8 mb-4",onSubmit:ne.handleSubmit,children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"flex-1 md:pr-3",children:(0,r.jsx)(j,{inputProps:{id:b.taskName,name:b.taskName,type:"text",onChange:ne.handleChange,value:ne.values[b.taskName]},label:"\u4efb\u52d9\u540d\u7a31",showError:!(!ne.touched[b.taskName]||!ne.errors[b.taskName]),errorString:ne.errors[b.taskName]},"contact-us-form-input-".concat(b.taskName))}),(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsx)("div",{children:"choose department"}),X.map((function(e,t){return(0,r.jsxs)("div",{children:[(0,r.jsx)("input",{id:e,type:"radio",value:e,name:b.department,onChange:ne.handleChange,defaultChecked:ne.values[b.department]===e}),(0,r.jsx)("label",{htmlFor:e,children:e})]},"".concat(b.department,"-").concat(t))})),(0,r.jsx)("div",{className:m()("text-red-500 text-body-sm h-4 my-1",ne.touched[b.department]?"opacity-100":"opacity-0"),children:ne.errors[b.department]})]}),ee&&(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsx)("div",{children:"Choose Assignee"}),(0,r.jsx)(M.ZP,{id:b.assignee,label:b.assignee,options:ee.map((function(e){return{value:e.gid,label:e.name}})),onChange:function(e){e&&ne.handleChange(b.assignee)(e.value)}})]}),Q&&(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("input",{id:b.copyToSelectedProject,type:"checkbox",name:b.copyToSelectedProject,onChange:ne.handleChange}),(0,r.jsx)("label",{htmlFor:b.copyToSelectedProject,children:"copy To Selected Project"})]}),(0,r.jsx)("div",{className:m()("text-red-500 text-body-sm h-4 my-1",ne.touched[b.copyToSelectedProject]?"opacity-100":"opacity-0"),children:ne.errors[b.copyToSelectedProject]})]})]}),(0,r.jsx)("button",{className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline",type:"submit",children:"\u78ba\u8a8d\u9001\u51fa"})]})]})}),[q,Q,ne,ee]);return T?(0,r.jsx)("div",{children:"isDoingCreateTask"}):E?(0,r.jsx)("div",{children:E}):(0,r.jsxs)("div",{children:[oe,q&&(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{children:["selectedTask (Project):"," ",q.name]}),(0,r.jsx)("button",{className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline",onClick:function(){H(void 0),Y(void 0),te([])},children:"clear selected task"})]}),ce]})},J=["To do","In progress","Needs review","Complete"];function K(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return Q(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Q(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){c=!0,s=e},f:function(){try{o||null==n.return||n.return()}finally{if(c)throw s}}}}function Q(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Y="project-name",$="\u5c08\u6848\u540d\u7a31",W="text",ee="AAA",te=(0,u.Z)({},Y,""),ne=d.Ry().shape((0,u.Z)({},Y,d.Z_().required("\u672c\u6b04\u4f4d\u70ba\u5fc5\u586b"))),re=function(e){var t=e.asanaAccessToken,n=e.allProjectsId,s=e.developerTeamId,u=e.fontechTeamId,d=a.useState(!1),p=(0,i.Z)(d,2),f=p[0],m=p[1],h=a.useState(""),v=(0,i.Z)(h,2),x=v[0],b=v[1],k=function(){var e=(0,c.Z)(o().mark((function e(r){var a,i,d,l,p,f,h,v,x,j,k,g;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r||"AAA",e.prev=1,e.next=4,F(t);case 4:return i=e.sent,e.next=7,i.projects.createInTeam(u,{name:a,notes:"\u6b63\u5f0f\u7ad9\n\u524d\u53f0\n\n\u5f8c\u53f0\n\u5e33\u865f\n\u5bc6\u78bc\n\n\u6e2c\u8a66\u7ad9\n\u524d\u53f0\n\n\u5f8c\u53f0\n\u5e33\u865f\n\u5bc6\u78bc\n\n(\u82e5\u6b64\u5c08\u6848\u7121\u8a72\u9805\u8acb\u522a\u9664)\n\nGoogle drive:\n\n\u7db2\u7ad9\u57fa\u672c\u8cc7\u8a0a\ntitle\ndescription\nog:image\nfavicon\nicon\ndomain\nga (optional)\ngtag (optional)\nfacebook app id (optional)\nfacebook app secret (optional)\ngoogle app id (optional)\ngoogle app secret (optional)\ncontact email (optional)\nemail sender name (optional)\n",color:"light-green",default_view:"board"});case 7:return d=e.sent,e.next=10,i.sections.findByProject(d.gid);case 10:l=e.sent,p=K(J),e.prev=12,p.s();case 14:if((f=p.n()).done){e.next=20;break}return h=f.value,e.next=18,i.sections.createInProject(d.gid,{name:h});case 18:e.next=14;break;case 20:e.next=25;break;case 22:e.prev=22,e.t0=e.catch(12),p.e(e.t0);case 25:return e.prev=25,p.f(),e.finish(25);case 28:return e.next=30,Promise.all(l.map((function(e){return i.sections.delete(e.gid)})));case 30:return v=d.permalink_url,e.next=33,i.tasks.create({name:a,projects:[n],notes:v});case 33:return x=e.sent,j=x.gid,e.next=37,i.tasks.addSubtask(j,{name:"".concat(a,"| Developer")});case 37:return k=e.sent,e.next=40,i.sections.findByProject(s);case 40:return g=e.sent,e.next=43,Promise.all(g.map((function(e){return new Promise((function(t,n){(function(){var r=(0,c.Z)(o().mark((function r(){var s,c;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,i.tasks.addSubtask(k.gid,{name:"".concat(a,"| ").concat(e.name)});case 3:s=r.sent,c=i.sections.addTaskForSection(e.gid,{task:s.gid}),t(c),r.next=11;break;case 8:r.prev=8,r.t0=r.catch(0),n(r.t0);case 11:case"end":return r.stop()}}),r,null,[[0,8]])})));return function(){return r.apply(this,arguments)}})()()}))})));case 43:return e.next=45,i.tasks.addSubtask(j,{name:"".concat(a,"| Design")});case 45:return e.next=47,i.tasks.addSubtask(j,{name:"".concat(a,"| PM")});case 47:e.next=56;break;case 49:return e.prev=49,e.t1=e.catch(1),b("\u5931\u6557"),e.next=54,(0,I._v)(5e3);case 54:return m(!1),e.abrupt("return");case 56:return b("\u6210\u529f"),e.next=59,(0,I._v)(5e3);case 59:m(!1);case 60:case"end":return e.stop()}}),e,null,[[1,49],[12,22,25,28]])})));return function(t){return e.apply(this,arguments)}}(),g=(0,l.TA)({initialValues:te,validationSchema:ne,onSubmit:function(e){f||(m(!0),k(e[Y]))}}),w=a.useMemo((function(){return f?(0,r.jsx)("div",{children:"\u8655\u7406\u4e2d..."}):(0,r.jsxs)("form",{className:"bg-white shadow-md rounded px-8 pt-6 pb-8 mb-4",onSubmit:g.handleSubmit,children:[(0,r.jsx)("div",{children:(0,r.jsx)("div",{className:"flex-1 md:pr-3",children:(0,r.jsx)(j,{inputProps:{id:Y,name:Y,placeholder:ee,type:W,onChange:g.handleChange,value:g.values[Y]},label:$,showError:!(!g.touched[Y]||!g.errors[Y]),errorString:g.errors[Y]},"contact-us-form-input-".concat(Y))})}),(0,r.jsx)("button",{className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline",type:"submit",children:"\u78ba\u8a8d\u9001\u51fa"})]})}),[f,g]);return x?(0,r.jsx)("div",{className:"p-4",children:x}):(0,r.jsx)("div",{children:(0,r.jsx)("div",{className:"p-4",children:w})})};function ae(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function se(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ae(Object(n),!0).forEach((function(t){(0,u.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ae(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var oe=[{value:"showCreateProject",label:"showCreateProject"},{value:"showCreateTask",label:"showCreateTask"}],ce=function(e){var t=a.useState(oe[0]),n=(0,i.Z)(t,2),s=n[0],o=n[1],c=a.useMemo((function(){return"showCreateTask"===s.value?(0,r.jsx)(H,se({},e)):(0,r.jsx)(re,se({},e))}),[s]);return(0,r.jsxs)("div",{children:[(0,r.jsx)(M.ZP,{label:"Single select",options:oe,defaultValue:oe[0],onChange:o}),c]})},ie=function(){var e=(0,p.v9)((function(e){return{localData:e.localDataManagerState.data}}),p.wU).localData,t=a.useMemo((function(){var t=(0,r.jsx)(_,{});if(!e)return t;var n=e.asanaAccessToken,a=e.gids;if([n,a].find((function(e){return!e})))return t;var s=null===a||void 0===a?void 0:a["all-projects-id"],o=null===a||void 0===a?void 0:a["developer-team-id"],c=null===a||void 0===a?void 0:a["developer-team-progress-id"],i=null===a||void 0===a?void 0:a["fontech-team-id"],u=null===a||void 0===a?void 0:a["total-project-progress-id"];return[s,o,c,i,u].find((function(e){return!e}))?t:(0,r.jsx)(ce,{asanaAccessToken:n,allProjectsId:s.toString(),developerTeamId:o.toString(),developerTeamProgressId:c.toString(),fontechTeamId:i.toString(),totalProjectProgressId:u.toString()})}),[e]);return(0,r.jsx)("div",{className:"p-4",children:t})}},5301:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(3069)}])},2825:function(){},9862:function(){},964:function(){}},function(e){e.O(0,[662,831,627,64,726,774,888,179],(function(){return t=5301,e(e.s=t);var t}));var t=e.O();_N_E=t}]);