(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{3069:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return ie}});var r=n(5893),a=n(7294),s=n(809),o=n.n(s),c=n(266),i=n(7182),u=n(2809),d=n(9501),l=n(4044),p=n(1372),f=n(4184),m=n.n(f);function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){(0,u.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var b,x,j=function(e){var t=e.className,n=e.inputProps,a=void 0===n?{}:n,s=e.label,o=e.showError,c=void 0!==o&&o,i=e.errorString,u=void 0===i?"":i;return(0,r.jsxs)("div",{className:"pb-8",children:[(0,r.jsxs)("div",{className:t,children:[(0,r.jsx)("label",{className:"flex-0 block text-gray-700 text-sm font-bold mb-2",children:s}),(0,r.jsx)("input",v({className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",type:"text"},a))]}),(0,r.jsx)("div",{className:m()("text-red-500 text-body-sm h-4 my-1",c&&u?"opacity-100":"opacity-0"),children:u})]})},k=n(773),g=n(5503),w=n(4642),y=n(1369),P=(0,g.ZF)({apiKey:"AIzaSyBd-Iaq7fSXCrLMLZLHD8gU0gjLQJYlszs",authDomain:"fontech-asana.firebaseapp.com",databaseURL:"https://fontech-asana-default-rtdb.firebaseio.com",projectId:"fontech-asana"}),S=function(){var e=(0,c.Z)(o().mark((function e(){var t,n,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,w.iH)((0,w.N8)()),e.next=3,(0,w.U2)((0,w.iU)(t,"/"));case 3:if((n=e.sent).exists()){e.next=6;break}throw new Error("snapshot not exists");case 6:return r=n.val(),e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),T=function(){var e=(0,c.Z)(o().mark((function e(t){var n,r,a,s,c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.email,r=t.password,a=(0,y.v0)(),e.next=4,(0,y.e5)(a,n,r);case 4:return s=e.sent,c=s.user,e.abrupt("return",c);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=function(){var e=(0,c.Z)(o().mark((function e(t){var n,r,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.email,r=t.password,P){e.next=3;break}throw new Error("firebase not found");case 3:return e.next=5,T({email:n,password:r});case 5:if(e.sent){e.next=8;break}throw new Error("user not found");case 8:return e.next=10,S();case 10:return a=e.sent,e.abrupt("return",a);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();!function(e){e.email="email",e.password="password"}(b||(b={})),function(e){e.taskName="task-name",e.department="department",e.copyToSelectedProject="copy-to-selected-project",e.assignee="assignee"}(x||(x={}));var Z,N,E,A=n(7990),C=[{id:b.email,label:"Email*",type:"text",placeholder:"name@example.com"},{id:b.password,label:"\u5bc6\u78bc*",type:"password",placeholder:"\u8acb\u8f38\u5165\u60a8\u7684\u5bc6\u78bc"}],I=(Z={},(0,u.Z)(Z,b.email,""),(0,u.Z)(Z,b.password,""),Z),D=d.Ry().shape({email:d.Z_().email("\u7121\u6548\u7684\u96fb\u5b50\u90f5\u4ef6").required("\u672c\u6b04\u4f4d\u70ba\u5fc5\u586b"),password:d.Z_().required("\u672c\u6b04\u4f4d\u70ba\u5fc5\u586b")}),_=function(){var e=(0,p.I0)(),t=a.useState(!1),n=(0,i.Z)(t,2),s=n[0],u=n[1],d=a.useState(""),f=(0,i.Z)(d,2),m=f[0],h=f[1],v=(0,l.TA)({initialValues:I,validationSchema:D,onSubmit:function(){var t=(0,c.Z)(o().mark((function t(n){var r,a,c;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!s){t.next=2;break}return t.abrupt("return");case 2:return u(!0),t.prev=3,t.next=6,O({email:n[b.email],password:n[b.password]});case 6:if(r=t.sent){t.next=9;break}throw new Error("realTimeData not found");case 9:if(a=r["asana-access-token"],c=r.gids,a){t.next=13;break}throw new Error("asanaAccessToken is not vaild");case 13:e((o={data:{asanaAccessToken:a,gids:c}},{type:k.I.SAVE_LOCALDATA,data:o})),t.next=24;break;case 16:return t.prev=16,t.t0=t.catch(3),h("Login failed"),t.next=21,(0,A._v)(2e3);case 21:return h(""),u(!1),t.abrupt("return");case 24:u(!1);case 25:case"end":return t.stop()}var o}),t,null,[[3,16]])})));return function(e){return t.apply(this,arguments)}}()});return(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{children:"Update: 2020/09/06 13:00"}),(0,r.jsx)("p",{children:"\u8acb\u5148\u767b\u5165"}),(0,r.jsxs)("form",{className:"bg-white shadow-md rounded px-8 pt-6 pb-8 mb-4",onSubmit:v.handleSubmit,children:[(0,r.jsx)("div",{children:(0,r.jsx)("div",{className:"flex-1 md:pr-3",children:C.map((function(e){return(0,r.jsx)(j,{inputProps:{id:e.id,name:e.id,placeholder:e.placeholder,type:e.type,onChange:v.handleChange,value:v.values[e.id]},label:e.label,showError:!(!v.touched[e.id]||!v.errors[e.id]),errorString:v.errors[e.id]},"contact-us-form-input-".concat(e.id))}))})}),(0,r.jsx)("button",{className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline",type:"submit",children:"\u78ba\u8a8d\u9001\u51fa"}),m&&(0,r.jsx)("p",{children:m})]})]})},M=n(4880),B=n(7201),F=function(){var e=(0,c.Z)(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}throw new Error("asanaAccessToken not found");case 2:if(n=B.Client.create().useAccessToken(t)){e.next=5;break}throw new Error("client not found");case 5:return e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),G=function(){var e=(0,c.Z)(o().mark((function e(t){var n,r,a,s,c,i,u,d,l,p;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.asanaAccessToken,r=t.totalProjectProgressId,a=t.developerTeamId,s=t.selectedTask,c=t.selectedProjectGid,i=t.values,s){e.next=3;break}throw new Error("selectedTaskGid not found");case 3:return e.next=5,F(n);case 5:return u=e.sent,d=i[x.department],e.next=9,u.tasks.subtasks(s.gid);case 9:if(l=e.sent){e.next=12;break}throw new Error("selectedTaskSubTasks not found");case 12:return e.next=14,u.sections.findByProject(r);case 14:if(p=e.sent){e.next=17;break}throw new Error("totalProjectProgressSections not found");case 17:if(!["PM","Design"].includes(d)){e.next=21;break}return e.next=20,L({client:u,selectedTask:s,selectedProjectGid:c,values:i,selectedTaskSubTasks:l,totalProjectProgressSections:p});case 20:return e.abrupt("return");case 21:return e.next=23,U({client:u,selectedTask:s,developerTeamId:a,selectedProjectGid:c,values:i,selectedTaskSubTasks:l,totalProjectProgressSections:p});case 23:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),L=function(){var e=(0,c.Z)(o().mark((function e(t){var n,r,a,s,c,i,u,d,l,p,f,m,h,v;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.client,r=t.selectedTask,a=t.selectedProjectGid,s=t.values,c=t.selectedTaskSubTasks,i=t.totalProjectProgressSections,u=s[x.taskName],d=s[x.department],l=s[x.copyToSelectedProject],p=s[x.assignee],f="".concat(r.name,"| ").concat(d),m=c.data.find((function(e){return e.name===f}))){e.next=8;break}return e.next=7,n.tasks.addSubtask(r.gid,{name:f});case 7:m=e.sent;case 8:return e.next=10,n.tasks.addSubtask(m.gid,{name:u,assignee:p});case 10:if(h=e.sent){e.next=13;break}throw new Error("newTask not found");case 13:if(v=i.find((function(e){return e.name===d}))){e.next=16;break}throw new Error("totalProjectProgressSection not found");case 16:return e.next=18,n.sections.addTaskForSection(v.gid,{task:h.gid});case 18:if(!l||!a){e.next=21;break}return e.next=21,n.tasks.addProject(h.gid,{project:a});case 21:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),U=function(){var e=(0,c.Z)(o().mark((function e(t){var n,r,a,s,c,u,d,l,p,f,m,h,v,b,j,k,g,w,y,P,S,T,O,Z;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.client,r=t.selectedTask,a=t.developerTeamId,s=t.selectedProjectGid,c=t.values,u=t.selectedTaskSubTasks,d=t.totalProjectProgressSections,l=c[x.taskName],p=c[x.department],f=c[x.copyToSelectedProject],m=c[x.assignee],h=p.split("| "),v=(0,i.Z)(h,2),b=v[0],j=v[1],k="".concat(r.name,"| ").concat(b),g="".concat(r.name,"| ").concat(j),e.next=7,n.sections.findByProject(a);case 7:if(w=e.sent,y=w.find((function(e){return e.name===j}))){e.next=11;break}throw new Error("selectedDeveloperTeamSection not found");case 11:if(P=u.data.find((function(e){return e.name===k}))){e.next=16;break}return e.next=15,n.tasks.addSubtask(r.gid,{name:k});case 15:P=e.sent;case 16:if(P){e.next=18;break}throw new Error("departmentTask not found");case 18:return e.next=20,n.tasks.subtasks(P.gid);case 20:if(S=e.sent,T=S.data.find((function(e){return e.name===g}))){e.next=28;break}return e.next=25,n.tasks.addSubtask(P.gid,{name:g});case 25:return T=e.sent,e.next=28,n.sections.addTaskForSection(y.gid,{task:T.gid});case 28:if(T){e.next=30;break}throw new Error("departmentSectionTask not found");case 30:return e.next=32,n.tasks.addSubtask(T.gid,{name:l,assignee:m});case 32:if(O=e.sent){e.next=35;break}throw new Error("newTask not found");case 35:if(Z=d.find((function(e){return e.name===j}))){e.next=38;break}throw new Error("totalProjectProgressSection not found");case 38:return e.next=40,n.sections.addTaskForSection(Z.gid,{task:O.gid});case 40:if(!f||!s){e.next=43;break}return e.next=43,n.tasks.addProject(O.gid,{project:s});case 43:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function V(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?q(Object(n),!0).forEach((function(t){(0,u.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var X=["PM","Design","Developer| App","Developer| Frontend","Developer| Backend","Developer| Other"],R=(N={},(0,u.Z)(N,x.taskName,""),(0,u.Z)(N,x.department,""),(0,u.Z)(N,x.copyToSelectedProject,!1),(0,u.Z)(N,x.assignee,""),N),z=d.Ry().shape((E={},(0,u.Z)(E,x.taskName,d.Z_().required("\u672c\u6b04\u4f4d\u70ba\u5fc5\u586b")),(0,u.Z)(E,x.department,d.Z_().required("\u8acb\u9078\u64c7\u4e00\u500b\u9805\u76ee")),(0,u.Z)(E,x.copyToSelectedProject,d.Xg()),(0,u.Z)(E,x.assignee,d.Z_()),E)),H=function(e){var t=e.asanaAccessToken,n=e.allProjectsId,s=e.developerTeamId,u=e.fontechTeamId,d=e.totalProjectProgressId,p=a.useState(!1),f=(0,i.Z)(p,2),h=f[0],v=f[1],b=a.useState(!1),k=(0,i.Z)(b,2),g=k[0],w=k[1],y=a.useState(!1),P=(0,i.Z)(y,2),S=P[0],T=P[1],O=a.useState(""),Z=(0,i.Z)(O,2),N=Z[0],E=Z[1],C=a.useState(Array()),I=(0,i.Z)(C,2),D=I[0],_=I[1],B=a.useState(void 0),L=(0,i.Z)(B,2),U=L[0],q=L[1],H=a.useState(void 0),J=(0,i.Z)(H,2),K=J[0],Q=J[1],Y=a.useState(Array()),$=(0,i.Z)(Y,2),W=$[0],ee=$[1],te=(0,l.TA)({initialValues:R,validationSchema:z,onSubmit:function(e){var n=function(){var n=(0,c.Z)(o().mark((function n(){return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,G({asanaAccessToken:t,totalProjectProgressId:d,developerTeamId:s,selectedTask:U,selectedProjectGid:null===K||void 0===K?void 0:K.gid,values:e});case 3:E("success"),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),E("fail");case 9:return n.next=11,(0,A._v)(2e3);case 11:T(!1);case 12:case"end":return n.stop()}}),n,null,[[0,6]])})));return function(){return n.apply(this,arguments)}}();S||(T(!0),n())}}),ne=function(){var e=(0,c.Z)(o().mark((function e(){var r,a,s,c,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,F(t);case 3:return r=e.sent,e.next=6,r.sections.findByProject(n);case 6:return a=e.sent,s=a.filter((function(e){return"Other"!==e.name})),e.next=10,Promise.all(s.map((function(e){return r.tasks.findBySection(e.gid)})));case 10:c=e.sent,i=s.map((function(e,t){return V(V({},e),{},{list:c[t].data})})),_(i),e.next=17;break;case 15:e.prev=15,e.t0=e.catch(0);case 17:return e.next=19,(0,A._v)(5e3);case 19:v(!1);case 20:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(){return e.apply(this,arguments)}}();a.useEffect((function(){h||U||(v(!0),ne())}),[]);var re=function(){var e=(0,c.Z)(o().mark((function e(){var n,r,a,s,c,i,d;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,U){e.next=3;break}throw new Error("selectedTask not found");case 3:return e.next=5,F(t);case 5:return n=e.sent,e.next=8,n.tasks.findById(U.gid);case 8:if(r=e.sent,a=r.notes,s=a.match("https://app.asana.com/0/(.*)/"),!(c=null===s||void 0===s?void 0:s[1])){e.next=17;break}return e.next=15,n.projects.findById(c);case 15:i=e.sent,Q(i);case 17:return e.next=19,n.teams.users(u);case 19:(d=e.sent)&&ee(d.data),e.next=31;break;case 23:return e.prev=23,e.t0=e.catch(0),e.next=27,(0,A._v)(5e3);case 27:return Q(void 0),ee([]),w(!1),e.abrupt("return");case 31:return e.next=33,(0,A._v)(5e3);case 33:w(!1);case 34:case"end":return e.stop()}}),e,null,[[0,23]])})));return function(){return e.apply(this,arguments)}}();a.useEffect((function(){U&&(g||re())}),[U]);var ae=function(){var e=(0,c.Z)(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:Q(void 0),ee([]),q({gid:t.value,name:t.label});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),se=a.useMemo((function(){if(!U)return(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{children:"Choose a Task (Project)"}),(0,r.jsx)("div",{className:"flex flex-wrap -mx-2",children:D.map((function(e){return(0,r.jsxs)("div",{className:"w-64 px-2",children:[(0,r.jsx)("div",{children:e.name}),(0,r.jsx)(M.ZP,{label:e.name,options:e.list.map((function(e){return{value:e.gid,label:e.name}})),onChange:ae})]},"all-project-sections-".concat(e.gid))}))})]})}),[D,U]),oe=a.useMemo((function(){if(U)return(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{children:["Find Project"," ",K?"V":"X"]}),(0,r.jsxs)("form",{className:"bg-white shadow-md rounded px-8 pt-6 pb-8 mb-4",onSubmit:te.handleSubmit,children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"flex-1 md:pr-3",children:(0,r.jsx)(j,{inputProps:{id:x.taskName,name:x.taskName,type:"text",onChange:te.handleChange,value:te.values[x.taskName]},label:"\u4efb\u52d9\u540d\u7a31",showError:!(!te.touched[x.taskName]||!te.errors[x.taskName]),errorString:te.errors[x.taskName]},"contact-us-form-input-".concat(x.taskName))}),(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsx)("div",{children:"choose department"}),X.map((function(e,t){return(0,r.jsxs)("div",{children:[(0,r.jsx)("input",{id:e,type:"radio",value:e,name:x.department,onChange:te.handleChange,defaultChecked:te.values[x.department]===e}),(0,r.jsx)("label",{htmlFor:e,children:e})]},"".concat(x.department,"-").concat(t))})),(0,r.jsx)("div",{className:m()("text-red-500 text-body-sm h-4 my-1",te.touched[x.department]?"opacity-100":"opacity-0"),children:te.errors[x.department]})]}),W&&(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsx)("div",{children:"Choose Assignee"}),(0,r.jsx)(M.ZP,{id:x.assignee,label:x.assignee,options:W.map((function(e){return{value:e.gid,label:e.name}})),onChange:function(e){e&&te.handleChange(x.assignee)(e.value)}})]}),K&&(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("input",{id:x.copyToSelectedProject,type:"checkbox",name:x.copyToSelectedProject,onChange:te.handleChange}),(0,r.jsx)("label",{htmlFor:x.copyToSelectedProject,children:"copy To Selected Project"})]}),(0,r.jsx)("div",{className:m()("text-red-500 text-body-sm h-4 my-1",te.touched[x.copyToSelectedProject]?"opacity-100":"opacity-0"),children:te.errors[x.copyToSelectedProject]})]})]}),(0,r.jsx)("button",{className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline",type:"submit",children:"\u78ba\u8a8d\u9001\u51fa"})]})]})}),[U,K,te,W]);return S?(0,r.jsx)("div",{children:"isDoingCreateTask"}):N?(0,r.jsx)("div",{children:N}):(0,r.jsxs)("div",{children:[se,U&&(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{children:["selectedTask (Project):"," ",U.name]}),(0,r.jsx)("button",{className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline",onClick:function(){q(void 0),Q(void 0),ee([])},children:"clear selected task"})]}),oe]})},J=["To do","In progress","Needs review","Complete"];function K(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return Q(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Q(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){c=!0,s=e},f:function(){try{o||null==n.return||n.return()}finally{if(c)throw s}}}}function Q(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Y="project-name",$="\u5c08\u6848\u540d\u7a31",W="text",ee="AAA",te=(0,u.Z)({},Y,""),ne=d.Ry().shape((0,u.Z)({},Y,d.Z_().required("\u672c\u6b04\u4f4d\u70ba\u5fc5\u586b"))),re=function(e){var t=e.asanaAccessToken,n=e.allProjectsId,s=e.developerTeamId,u=e.fontechTeamId,d=a.useState(!1),p=(0,i.Z)(d,2),f=p[0],m=p[1],h=a.useState(""),v=(0,i.Z)(h,2),b=v[0],x=v[1],k=function(){var e=(0,c.Z)(o().mark((function e(r){var a,i,d,l,p,f,h,v,b,j,k,g;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r||"AAA",e.prev=1,e.next=4,F(t);case 4:return i=e.sent,e.next=7,i.projects.createInTeam(u,{name:a,notes:"\u6b63\u5f0f\u7ad9\n\u524d\u53f0\n\n\u5f8c\u53f0\n\u5e33\u865f\n\u5bc6\u78bc\n\n\u6e2c\u8a66\u7ad9\n\u524d\u53f0\n\n\u5f8c\u53f0\n\u5e33\u865f\n\u5bc6\u78bc\n\n(\u82e5\u6b64\u5c08\u6848\u7121\u8a72\u9805\u8acb\u522a\u9664)\n\nGoogle drive:\n\n\u7db2\u7ad9\u57fa\u672c\u8cc7\u8a0a\ntitle\ndescription\nog:image\nfavicon\nicon\ndomain\nga (optional)\ngtag (optional)\nfacebook app id (optional)\nfacebook app secret (optional)\ngoogle app id (optional)\ngoogle app secret (optional)\ncontact email (optional)\nemail sender name (optional)\n",color:"light-green",default_view:"board"});case 7:return d=e.sent,e.next=10,i.sections.findByProject(d.gid);case 10:l=e.sent,p=K(J),e.prev=12,p.s();case 14:if((f=p.n()).done){e.next=20;break}return h=f.value,e.next=18,i.sections.createInProject(d.gid,{name:h});case 18:e.next=14;break;case 20:e.next=25;break;case 22:e.prev=22,e.t0=e.catch(12),p.e(e.t0);case 25:return e.prev=25,p.f(),e.finish(25);case 28:return e.next=30,Promise.all(l.map((function(e){return i.sections.delete(e.gid)})));case 30:return v=d.permalink_url,e.next=33,i.tasks.create({name:a,projects:[n],notes:v});case 33:return b=e.sent,j=b.gid,e.next=37,i.tasks.addSubtask(j,{name:"".concat(a,"| Developer")});case 37:return k=e.sent,e.next=40,i.sections.findByProject(s);case 40:return g=e.sent,e.next=43,Promise.all(g.map((function(e){return new Promise((function(t,n){(function(){var r=(0,c.Z)(o().mark((function r(){var s,c;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,i.tasks.addSubtask(k.gid,{name:"".concat(a,"| ").concat(e.name)});case 3:s=r.sent,c=i.sections.addTaskForSection(e.gid,{task:s.gid}),t(c),r.next=11;break;case 8:r.prev=8,r.t0=r.catch(0),n(r.t0);case 11:case"end":return r.stop()}}),r,null,[[0,8]])})));return function(){return r.apply(this,arguments)}})()()}))})));case 43:return e.next=45,i.tasks.addSubtask(j,{name:"".concat(a,"| Design")});case 45:return e.next=47,i.tasks.addSubtask(j,{name:"".concat(a,"| PM")});case 47:e.next=56;break;case 49:return e.prev=49,e.t1=e.catch(1),x("\u5931\u6557"),e.next=54,(0,A._v)(5e3);case 54:return m(!1),e.abrupt("return");case 56:return x("\u6210\u529f"),e.next=59,(0,A._v)(5e3);case 59:m(!1);case 60:case"end":return e.stop()}}),e,null,[[1,49],[12,22,25,28]])})));return function(t){return e.apply(this,arguments)}}(),g=(0,l.TA)({initialValues:te,validationSchema:ne,onSubmit:function(e){f||(m(!0),k(e[Y]))}}),w=a.useMemo((function(){return f?(0,r.jsx)("div",{children:"\u8655\u7406\u4e2d..."}):(0,r.jsxs)("form",{className:"bg-white shadow-md rounded px-8 pt-6 pb-8 mb-4",onSubmit:g.handleSubmit,children:[(0,r.jsx)("div",{children:(0,r.jsx)("div",{className:"flex-1 md:pr-3",children:(0,r.jsx)(j,{inputProps:{id:Y,name:Y,placeholder:ee,type:W,onChange:g.handleChange,value:g.values[Y]},label:$,showError:!(!g.touched[Y]||!g.errors[Y]),errorString:g.errors[Y]},"contact-us-form-input-".concat(Y))})}),(0,r.jsx)("button",{className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline",type:"submit",children:"\u78ba\u8a8d\u9001\u51fa"})]})}),[f,g]);return b?(0,r.jsx)("div",{className:"p-4",children:b}):(0,r.jsx)("div",{children:(0,r.jsx)("div",{className:"p-4",children:w})})};function ae(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function se(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ae(Object(n),!0).forEach((function(t){(0,u.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ae(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var oe=[{value:"showCreateProject",label:"showCreateProject"},{value:"showCreateTask",label:"showCreateTask"}],ce=function(e){var t=a.useState(oe[0]),n=(0,i.Z)(t,2),s=n[0],o=n[1],c=a.useMemo((function(){return"showCreateTask"===s.value?(0,r.jsx)(H,se({},e)):(0,r.jsx)(re,se({},e))}),[s]);return(0,r.jsxs)("div",{children:[(0,r.jsx)(M.ZP,{label:"Single select",options:oe,defaultValue:oe[0],onChange:o}),c]})},ie=function(){var e=(0,p.v9)((function(e){return{localData:e.localDataManagerState.data}}),p.wU).localData,t=a.useMemo((function(){var t=(0,r.jsx)(_,{});if(!e)return t;var n=e.asanaAccessToken,a=e.gids;if([n,a].find((function(e){return!e})))return t;var s=null===a||void 0===a?void 0:a["all-projects-id"],o=null===a||void 0===a?void 0:a["developer-team-id"],c=null===a||void 0===a?void 0:a["fontech-team-id"],i=null===a||void 0===a?void 0:a["total-project-progress-id"];return[s,o,c,i].find((function(e){return!e}))?t:(0,r.jsx)(ce,{asanaAccessToken:n,allProjectsId:s.toString(),developerTeamId:o.toString(),fontechTeamId:c.toString(),totalProjectProgressId:i.toString()})}),[e]);return(0,r.jsx)("div",{className:"p-4",children:t})}},5301:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(3069)}])},2825:function(){},9862:function(){},964:function(){}},function(e){e.O(0,[662,831,627,64,726,774,888,179],(function(){return t=5301,e(e.s=t);var t}));var t=e.O();_N_E=t}]);